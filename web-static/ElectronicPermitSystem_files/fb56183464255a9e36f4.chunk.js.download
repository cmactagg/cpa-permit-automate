(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1054:function(e,t,n){"use strict";var r=n(7),a=p(r),s=n(64),i=p(s),o=n(29),d=c(o),l=n(99),u=c(l);function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}function f(e){var t=i.default.defer();return d.getToken().then(function(n){e.token=n,d.ajax(e,function(e){t.resolve(e)},function(e){t.reject(e)})}),t.promise}function m(e){return f({api:"/addresses/"+e})}function g(e,t,n){return f({api:"/cpaadmin/permits?addressId="+encodeURIComponent(e)+"&page="+encodeURIComponent(t)+"&size="+encodeURIComponent(n)})}function h(e){return f({api:"/cpaadmin/addresses/"+encodeURIComponent(e)+"/comments"})}function v(e){return f({api:"/cpaadmin/permitcontrolparams?addressId="+encodeURIComponent(e)})}function y(e,t){return f({api:"/cpaadmin/orgaddresses?addressId="+encodeURIComponent(e)+"&inactiveIncluded="+encodeURIComponent(t)})}function b(e){return f({api:"/cpaadmin/permitcontrolparams?organizationAddressId="+encodeURIComponent(e)})}function P(e){return f({api:"/cpaadmin/organizations/"+encodeURIComponent(e)})}function I(e,t,n){return f({api:"/cpaadmin/organizations/permits?organizationAddressId="+encodeURIComponent(e)+"&page="+encodeURIComponent(t)+"&size="+encodeURIComponent(n)})}function _(e){return f({api:"/permits/"+e})}function E(e){return f({api:"/permits/user/"+encodeURIComponent(e)})}function k(e,t,n){return f({api:"/cpaadmin/parkingsessions?permitId="+encodeURIComponent(e)+"&page="+encodeURIComponent(t)+"&size="+encodeURIComponent(n)})}function O(e){return f({api:"/comments?permitId="+encodeURIComponent(e)})}function C(e){return f({api:"/cpaadmin/comments?permitId="+encodeURIComponent(e)})}function R(e){var t=i.default.defer();return i.default.all([C(e),O(e)]).spread(function(e,n){var r={internal:e,external:n};t.resolve(r)},function(e){t.reject(e)}),t.promise}function S(e){return f({api:"/cpaadmin/organizations?organizationAddressId="+encodeURIComponent(e)})}function x(e){return f({api:"/parkingsessions/check?permitId="+encodeURIComponent(e)})}function U(e,t,n){return f({api:"/cpaadmin/parkingsessions?licensePlate="+encodeURIComponent(e.licensePlate)+"&provinceCode="+encodeURIComponent(e.province.code)+"&page="+encodeURIComponent(t)+"&size="+encodeURIComponent(n)})}function T(e){return f({api:"/cpaadmin/users/"+encodeURIComponent(e)})}function A(e,t,n){return f({api:"/cpaadmin/addresses?userId="+encodeURIComponent(e)+"&page="+encodeURIComponent(t)+"&size="+encodeURIComponent(n)})}function j(e){return f({api:"/cpaadmin/permits/count?addressId="+encodeURIComponent(e)})}function w(e,t,n){var r=i.default.defer(),s={},o=[],d=0;return A(e,t,n).then(function(e){s={size:e.size,first:e.first,last:e.last,number:e.number,numberOfElements:e.numberOfElements,sort:e.sort,totalElements:e.totalElements,totalPages:e.totalPages},e.content.length>0?a.default.forEach(e.content,function(t){j(t.id).then(function(n){o.push({address:t,permitCount:n}),d+=1,d===e.content.length&&(s.content=o,r.resolve(s))},function(e){r.reject(e)})}):(s.content=[],r.resolve(s))},function(e){r.reject(e)}),r.promise}e.exports={getPermitTypes:function(){return f({api:"/permits/types"})},searchAddressAdmin:function(e){var t=e.trim();return f({api:"/cpaadmin/addresses?searchTerm="+encodeURIComponent(t)})},searchPermits:function(e){var t=e.trim(),n=i.default.defer();return d.getToken().then(function(e){d.ajax({token:e,api:"/cpaadmin/permits?permitNumber="+encodeURIComponent(t)+"&size=50"},function(e){n.resolve(e.content)},function(e){n.reject(e)})}),n.promise},searchPlate:function(e){var t=e.trim();return f({api:"/cpaadmin/vehicles?licensePlate="+encodeURIComponent(t)})},getAddressDetailsById:function(e,t){var n=i.default.defer();return i.default.all([m(e),g(e,0,10),h(e),v(e),y(e,t)]).spread(function(e,t,r,s,o){var d=a.default.omit(t.permits,"content"),l={pageSize:d.size,firstPage:d.first,lastPage:d.last,pageNumber:d.number,numberOfPageElements:d.numberOfElements,pageSort:d.sort,totalElements:d.totalElements,totalPages:d.totalPages},u={pageData:l,permits:t.permits.content,permitPermissions:t.permission.permissionsList,address:e,rules:s,comments:r};if(0===o.length)n.resolve(u);else{var c=[],p=1;a.default.each(o,function(e){i.default.all([b(e.organizationAddressId),P(e.organizationId),I(e.organizationAddressId,0,10)]).spread(function(t,r,s){c.push({orgAddressId:e.organizationAddressId,permissionsList:s.permission.permissionsList,orgDetails:r,orgRules:t,permits:s.permits.content,permitPageInfo:a.default.omit(s.permits,"content")}),p===o.length&&(u.orgRules=c,n.resolve(u)),p++},function(e){n.reject(e)})})}},function(e){n.reject(e)}),n.promise},getPermitsByAddress:g,getPermitDetails:function(e){var t=i.default.defer(),n=i.default.defer();return i.default.all([_(e),k(e,0,10),R(e),function(e){return f({api:"/cpaadmin/payments/fntx?permitId="+encodeURIComponent(e)})}(e),x(e)]).spread(function(e,n,r,a,s){t.resolve({sessions:n.content,pageSize:n.size,firstPage:n.first,lastPage:n.last,pageNumber:n.number,numberOfPageElements:n.numberOfElements,pageSort:n.sort,totalElements:n.totalElements,totalPages:n.totalPages,resultObject:e,permit:e.domainObj,internal:r.internal,external:r.external,transaction:a,startable:s.startable})},function(e){t.reject(e)}),t.promise.then(function(t){"O"===t.permit.type?S(t.permit.ownerId).then(function(e){t.org=e,n.resolve(t)},function(e){n.reject(e)}):"U"===t.permit.type&&E(e).then(function(e){t.user=e,n.resolve(t)},function(e){n.reject(e)})},function(e){n.reject(e)}),n.promise},getUserDetails:function(e){var t=i.default.defer();return i.default.all([T(e),w(e,0,10)]).spread(function(e,n){var r={pageSize:n.size,firstPage:n.first,lastPage:n.last,pageNumber:n.number,numberOfPageElements:n.numberOfElements,pageSort:n.sort,totalElements:n.totalElements,totalPages:n.totalPages},a={addressPageDetail:r,user:e,addresses:n.content};t.resolve(a)},function(e){t.reject(e)}),t.promise},getPermitsByUserId:function(e,t,n,r){return f({api:"/cpaadmin/permits?userId="+encodeURIComponent(e)+"&addressId="+encodeURIComponent(t)+"&page="+encodeURIComponent(n)+"&size="+encodeURIComponent(r)})},getPlateDetailsById:function(e){var t=i.default.defer();return i.default.all([U(e,0,10)]).spread(function(e){t.resolve({sessions:e.content,pageSize:e.size,firstPage:e.first,lastPage:e.last,pageNumber:e.number,numberOfPageElements:e.numberOfElements,pageSort:e.sort,totalElements:e.totalElements,totalPages:e.totalPages})},function(e){t.reject(e)}),t.promise},generatePlateLinkObject:function(e){var t={licensePlate:a.default.has(e,"licencePlate")?e.licencePlate:e.licensePlate,province:{name:e.province.name,code:e.province.code}};return window.btoa(JSON.stringify(t))},decodePlateLinkObject:function(e){return JSON.parse(window.atob(e))},getAddressByUserId:A,getSessionsByPlateId:U,getSessionsByPermitId:k,addCommentForAddress:function(e,t){return f({api:"/cpaadmin/addresses/comments",mode:"POST",data:{addressId:e,comment:t}})},addCommentForPermit:function(e,t,n){return f({data:{comment:e,parentId:t,commentType:n},api:"/comments",mode:"POST"})},getUserById:T,getUserByPermitId:E,getCommentsForPermit:R,searchOrganization:function(e){var t=e.trim(),n=i.default.defer();return d.getToken().then(function(e){d.ajax({token:e,api:"/cpaadmin/organizations?name="+encodeURIComponent(t)+"&size=50"},function(e){n.resolve(e.content)},function(e){n.reject(e)})}),n.promise},getAuList:function(){return u.getAuList()},createOrganization:function(e){return f({api:"/cpaadmin/organizations",mode:"POST",data:{name:d.escapeHtml(e.name),alias:d.escapeHtml(e.alias),address:d.escapeHtml(e.address),city:d.escapeHtml(e.city),country:d.escapeHtml(e.country),province:e.province,postalCode:d.escapeHtml(e.postalCode)}})},getOrganization:P,addContact:function(e,t){return f({api:"/cpaadmin/organizations/contacts?orgId="+encodeURIComponent(t),mode:"POST",data:e})},removeContact:function(e){return f({api:"/cpaadmin/organizations/contacts/"+encodeURIComponent(e),mode:"DELETE"})},searchAddressUser:function(e){var t=e.trim();return f({api:"/addresses?searchTerm="+encodeURIComponent(t)})},getDuplicateIds:function(e){return f({api:"/cpaadmin/addresses?dupAddressId="+encodeURIComponent(e)})},assignAddressToOrg:function(e,t){return f({api:"/cpaadmin/orgaddresses",data:{organizationId:t,addressId:e},mode:"POST"})},assignUserToOrgAdmin:function(e,t){return f({api:"/cpaadmin/orgaddresses/orgAdmins",mode:"POST",data:{organizationAddressId:t,userId:e}})},getOrgAdminsForOrgAddress:function(e){return f({api:"/cpaadmin/orgaddresses/"+encodeURIComponent(e)+"/orgAdmins"})},removeUserFromOrgAdmin:function(e,t){return f({api:"/cpaadmin/orgaddresses/orgAdmins",mode:"DELETE",data:{organizationAddressId:t,userId:e}})},createPermitForOrgAddress:function(e){return f({api:"/cpaadmin/organizations/permits",mode:"POST",data:{organizationAddressId:e.orgAddressId,numberOfParkingSessions:e.numberOfSessions,effectiveDate:e.effectiveDate,expiryDate:e.expiryDate,permitTypeId:e.permitTypeId,permitReasonId:e.permitReasonId}})},getCommentsForAddress:h,getPermitsForOrgAddress:I,getAddressByOrgId:function(e,t){return f({api:"/cpaadmin/addresses?organizationId="+encodeURIComponent(e)+"&inactiveIncluded="+encodeURIComponent(t)})},getOrgRoles:function(){return f({api:"/orgadmin/roles"})},getPermitAddressesForUser:function(){return f({api:"/permits/addresses/"})},getPermitStatuses:function(){return f({api:"/permits/statuses"})},postPermitData:function(e){return f({api:"/permits",mode:"POST",data:e})},createParkingSession:function(e){return f({api:"/parkingsessions?action=start",mode:"POST",data:e})},endParkingSession:function(e){return f({api:"/parkingsessions?action=stop",mode:"POST",data:e})},canCreateParkingSessionCheck:x,getPermitsAndSessionsForAddress:function(e){return f({api:"/permits?addressId="+encodeURIComponent(e)})},getOrgAdminPermits:function(){return f({api:"/orgadmin/permits"})},getAddressById:m,assignSessionsToSessionAdminRole:function(e,t,n){return f({api:"/orgadmin/sessions/assignments",data:{permitId:e,numberOfParkingSessions:t,roleId:n},mode:"POST"})},assignUserToRole:function(e,t,n){return f({api:"/orgadmin/sessions/users",data:{permitId:e,email:t,roleId:n},mode:"POST"})},getSessionAdminPermits:function(){return f({api:"/sessadmin/permits"})},startSessionForSessionAdmin:function(e,t,n){return f({api:"/sessadmin/parkingsessions/start",data:{permitId:e,licensePlate:t,province:{id:n}},mode:"POST"})},stopSessionForSessionAdmin:function(e){return f({api:"/sessadmin/parkingsessions/stop",mode:"POST",data:{parkingSessionId:e}})},getSessionAdminSessionsByPermitId:function(e,t,n){return f({api:"/sessadmin/parkingsessions?permitId="+encodeURIComponent(e)+"&page="+encodeURIComponent(t)+"&size="+encodeURIComponent(n)})},getSessionAdminsByOrgAddressId:function(e){return f({api:"/orgadmin/oaur/users/sessionadminrole?organizationAddressId="+encodeURIComponent(e)})},getOrgByOrgAddressId:S,getRulesForOrgAddressId:b,cancelOrgPermit:function(e){return f({api:"/orgadmin/permits/cancel",data:{permitId:e},mode:"POST"})},revokeOrgPermit:function(e){return f({api:"/cpaadmin/permits/org/revoke",data:{permitId:e},mode:"POST"})},editOrganization:function(e,t){return t.id=e,f({api:"/cpaadmin/organizations",mode:"POST",data:t})},getOrgAddressByAddressId:y,removeSessionAdmin:function(e,t){return f({api:"/orgadmin/oaur/users/sessionadminrole",data:{userId:e,organizationAddressId:t},mode:"DELETE"})},removeAddressFromOrgByOrgAddressId:function(e){return f({api:"/cpaadmin/orgaddresses/"+encodeURIComponent(e),mode:"DELETE"})},sessionAdminCanCreateSessionCheck:function(e){return f({api:"/sessadmin/parkingsessions/check",data:{permitId:e},mode:"POST"})},reActivateAddressForOrganization:function(e){return f({api:"/cpaadmin/orgaddresses",data:{organizationAddressId:e},mode:"PUT"})},getPermitsByStatusId:function(e,t,n){var r=a.default.join(e,",");return f({api:"/cpaadmin/permits?statusIds="+encodeURIComponent(r)+"&page="+encodeURIComponent(t)+"&size="+encodeURIComponent(n)})},getBeanstreamInfo:function(e){return f({api:"/payments/cc",mode:"POST",data:e})},getPaymentTypes:function(){return f({api:"/payments/types"})},makeExternalPayment:function(e,t,n){return f({api:"/cpaadmin/payments",data:{paymentTypeId:e,permitId:n,comment:t},mode:"POST"})},changeEffectiveAndExpiryDateForPermit:function(e,t,n){return f({api:"/cpaadmin/permits/changeDateTime",data:{id:e,effectiveDate:t,expiryDate:n},mode:"PUT"})},changeActivationAndDeactivationDateForSession:function(e,t,n){return f({api:"/cpaadmin/parkingsessions",data:{id:e,activationDateTime:t,deactivationDateTime:n},mode:"PUT"})},applyChangesForPermit:function(e){return f({api:"/cpaadmin/permits/info",data:e,mode:"PUT"})},changePermitStatus:function(e){return f({api:"/permits/status",data:e,mode:"POST"})},getPermitById:_,getResourceById:function(e){return f({api:"/permits/resources/"+encodeURIComponent(e),mode:"GET"})},prePaymentCheck:function(e){return f({api:"/permits/paymentPreCheck/"+encodeURIComponent(e),mode:"GET"})},getSavedPermits:function(e,t){return f({api:"/permits?page="+encodeURIComponent(e)+"&size="+encodeURIComponent(t)})},getPermitReasons:function(e){return f({api:"/permits/reasons?permitTypeId="+encodeURIComponent(e),permitTypeId:e})},getExternalComments:O,getInternalComments:C,countPermitsForAddress:j,getAddressesByUserIdWithCount:w,getDefaultDurationForReason:function(e){return f({api:"/cpaadmin/permitcontrolparams/duration?reasonCodeId="+encodeURIComponent(e)})},getRulesByAddressIdAdmin:v,getRulesByAddressIdUser:function(e){return f({api:"/permitcontrolparams?addressId="+encodeURIComponent(e)})},validateIta:function(e){return f({api:"/invitation/validate",data:{id:e},mode:"POST"})},acceptIta:function(e){return f({api:"/invitation/accept",data:{id:e},mode:"POST"})},rejectIta:function(e){return f({api:"/invitation/reject",data:{id:e},mode:"POST"})},getAdminPermitTypes:function(){return f({api:"/cpaadmin/permits/types"})},revokePermit:function(e,t){return f({api:"/cpaadmin/permits/revoke",data:{id:e,comment:t},mode:"POST"})},filterPermit:function(e,t,n){return f({api:"/cpaadmin/permits?search="+encodeURIComponent(e)+"&page="+encodeURIComponent(t)+"&size="+encodeURIComponent(n)+"&sort=createdDate"})},getDefaultAu:function(){return u.getDefaultAu()},transferUserPermit:function(e,t,n){return f({api:"/cpaadmin/permits/transfer",data:{id:e,ownerId:t,comment:n},mode:"PUT"})}}},1063:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=m(a),i=n(0),o=m(i),d=n(4),l=m(d),u=n(6),c=m(u),p=n(30),f=m(p);function m(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._bind("handleClick"),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"handleClick",value:function(){this.props.clickCallback(this.props.data)}},{key:"render",value:function(){return s.default.createElement("div",null,s.default.createElement(f.default,{id:this.props.id,buttonText:this.props.buttonText,btnClass:(0,l.default)("btn-xs",this.props.btnCss),clickHandler:this.handleClick}))}}]),t}(c.default);t.default=g,g.propTypes={buttonText:o.default.string.isRequired,clickCallback:o.default.func.isRequired,data:o.default.oneOfType([o.default.string,o.default.object]).isRequired,btnCss:o.default.string.isRequired,id:o.default.string.isRequired}},1064:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=k(a),i=n(0),o=k(i),d=n(7),l=k(d),u=n(4),c=k(u),p=n(347),f=k(p),m=n(6),g=k(m),h=n(15),v=k(h),y=n(1054),b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(y),P=n(201),I=k(P),_=n(348),E=k(_);function k(e){return e&&e.__esModule?e:{default:e}}var O=(0,f.default)({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(37)]).then(n.t.bind(null,1021,7))},loading:E.default}),C=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._bind("generateBody","clickNext","clickPrevious","clickAttachment","refreshState","onDocumentLoadSuccess","onLoadError"),e.state={selectedIndex:0,currentFile:void 0,loading:!1,pageNumber:null,numPages:null},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){this.refreshState(this.props)}},{key:"componentWillReceiveProps",value:function(e){l.default.isEqual(this.props,e)||this.refreshState(e)}},{key:"refreshState",value:function(e){var t=this;e.files.length>0&&(this.setState({loading:!0}),b.getResourceById(e.files[this.state.selectedIndex].id).then(function(e){t.setState({currentFile:e,loading:!1})},function(e){console.log(e),t.setState({loading:!1})}))}},{key:"clickAttachment",value:function(){var e=document.createElement("a");e.href=this.props.files[this.state.selectedIndex].uri,e.click()}},{key:"onDocumentLoadSuccess",value:function(e){var t=e.numPages;this.setState({numPages:t,pageNumber:null})}},{key:"onLoadError",value:function(e){console.log(e)}},{key:"generateBody",value:function(){var e=l.default.isUndefined(this.state.currentFile)?"":"data:"+this.state.currentFile.mediaType+";base64, "+this.state.currentFile.fileData;return s.default.createElement("div",null,!l.default.isUndefined(this.state.currentFile)&&s.default.createElement("div",null,s.default.createElement("div",{id:"attachmentCountText",className:"text-center"},"viewing "+(this.state.selectedIndex+1)+" of "+this.props.files.length+" attachments"),s.default.createElement("div",{className:"text-center"},l.default.endsWith(this.state.currentFile.name.toLowerCase(),".pdf")?s.default.createElement("div",null,l.default.isUndefined(this.state.currentFile.fileData)?null:s.default.createElement("div",{id:"pdfView",className:"scrolly"},s.default.createElement(O,{id:"pdfView",pdfData:window.atob(this.state.currentFile.fileData)})),s.default.createElement("a",{id:"openInNewTabButton",className:"btn btn-default",href:"/doc/"+encodeURIComponent(this.state.currentFile.id),target:"_blank",rel:"noreferrer noopener"},v.default.t("open_in_tab"))):s.default.createElement("a",{id:"openInNewTablink",href:"/doc/"+encodeURIComponent(this.state.currentFile.id),target:"_blank",rel:"noreferrer noopener"},s.default.createElement("img",{className:"img-responsive center-block",alt:"fileImage",src:e}))),s.default.createElement("div",{id:"fileName",className:"text-center"},this.props.files[this.state.selectedIndex].name)))}},{key:"clickNext",value:function(){var e=this,t=this.state.selectedIndex;this.state.selectedIndex<this.props.files.length-1&&(t+=1),this.setState({selectedIndex:t},function(){e.refreshState(e.props)})}},{key:"clickPrevious",value:function(){var e=this,t=this.state.selectedIndex;this.state.selectedIndex>0&&(t-=1),this.setState({selectedIndex:t},function(){e.refreshState(e.props)})}},{key:"render",value:function(){var e=this.generateBody(),t={},n=!0,r={},a=!0;return r.className=(0,c.default)("clickable",{disabled:this.props.files.length<=1||this.state.selectedIndex===this.props.files.length-1}),(this.props.files.length<=1||this.state.selectedIndex===this.props.files.length-1)&&(r.disabled="disabled",a=!1),t.className=(0,c.default)("clickable",{disabled:this.props.files.length<=1||0===this.state.selectedIndex}),(this.props.files.length<=1||0===this.state.selectedIndex)&&(t.disabled="disabled",n=!1),s.default.createElement("div",null,this.state.loading?s.default.createElement("div",{className:"center-block"},s.default.createElement(I.default,{visible:!0,fullScreen:!1,width:12,radius:24})):s.default.createElement("div",null,e),s.default.createElement("nav",{"aria-label":"pager"},s.default.createElement("ul",{className:"pager"},s.default.createElement("li",t,s.default.createElement("a",{id:"previousAttachment",onClick:n?this.clickPrevious:function(e){e.preventDefault()}},v.default.t("previous"))),s.default.createElement("li",r,s.default.createElement("a",{id:"nextAttachment",onClick:a?this.clickNext:function(e){e.preventDefault()}},v.default.t("next"))))))}}]),t}(g.default);t.default=C,C.propTypes={files:o.default.array.isRequired}},1065:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=T(a),i=n(0),o=T(i),d=n(98),l=n(64),u=T(l),c=n(7),p=T(c),f=n(89),m=n(15),g=T(m),h=n(6),v=T(h),y=n(879),b=T(y),P=n(29),I=U(P),_=n(887),E=T(_),k=n(30),O=T(k),C=n(202),R=T(C),S=n(342),x=U(S);function U(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var D=function(e){function t(){A(this,t);var e=j(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._bind("refreshState","commentAdded","selectClicked","radioClicked"),e.state={comments:[],rules:{},isSelected:!1},e}return w(t,e),r(t,[{key:"componentDidMount",value:function(){this.refreshState(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.addressId!==e.addressId&&this.refreshState(e)}},{key:"refreshState",value:function(e){var t=this,n=u.default.defer(),r=u.default.defer();I.getToken().then(function(t){I.ajax({token:t,api:"/cpaadmin/addresses/"+encodeURIComponent(e.addressId)+"/comments"},function(e){n.resolve(e)},function(e){n.reject(e)})}),I.getToken().then(function(t){I.ajax({token:t,api:"/cpaadmin/permitcontrolparams?addressId="+encodeURIComponent(e.addressId)},function(e){r.resolve(e)},function(e){r.reject(e)})}),u.default.all([n.promise,r.promise]).spread(function(e,n){t.setState({comments:e,rules:n})})}},{key:"selectClicked",value:function(){this.props.onSelected(this.props.addressId)}},{key:"radioClicked",value:function(){this.setState({isSelected:!0}),this.props.onSelected(this.props.addressId)}},{key:"commentAdded",value:function(e,t){var n=this,r=u.default.defer();I.getToken().then(function(n){I.ajax({token:n,api:"/cpaadmin/addresses/comments",mode:"POST",data:{addressId:t,comment:e}},function(e){r.resolve(e)},function(e){r.reject(e)})}),r.promise.then(function(e){var t=p.default.concat(e,n.state.comments);n.setState({comments:t})},function(e){n._handleError(e,x)})}},{key:"render",value:function(){var e=[];p.default.isUndefined(this.state.rules)||p.default.each(this.state.rules,function(t){e.push([t,g.default.t(I.generateTypeTranslationVar(t.permitType.name)),null===t.maxFreePermitPerAddress?g.default.t("yes"):p.default.clamp(t.maxFreePermitPerAddress-t.numApprovedPermit,0,Number.MAX_SAFE_INTEGER),null===t.maxPermitPerAddress?g.default.t("yes"):t.maxPermitPerAddress-t.numApprovedPermit,null!==t.maxParkingSessionPerAddress?t.maxParkingSessionPerAddress:""])});var t=[g.default.t("permit_type"),g.default.t("free"),g.default.t("available"),g.default.t("max_sessions")],n=this.props.isSelectable?s.default.createElement("label",{className:"clickable",htmlFor:"addressRadio_"+this.props.index},s.default.createElement("input",{onClick:this.radioClicked,value:this.props.isSelected,checked:this.props.isSelected,type:"radio",name:this.props.addressId,id:"addressRadio_"+this.props.index}),g.default.t("address")+" "+this.props.index):g.default.t("address_details");return s.default.createElement("div",{className:"panel panel-default"},s.default.createElement("div",{className:"panel-heading"},s.default.createElement("div",null,n)),s.default.createElement("div",{className:"panel-body"},s.default.createElement(R.default,{panelHeading:g.default.t("rules"),id:"rules_"+this.props.index},s.default.createElement(E.default,{id:"rules_"+this.props.index+"_table",entries:e,headers:t})),s.default.createElement(b.default,{label:g.default.t("address_comments"),id:"addressCollapse_"+this.props.index,labelCss:"col-xl-12",showLabel:!0,objectId:this.props.addressId,comments:this.state.comments,commentAddedCallback:this.commentAdded})))}}]),t}(v.default);D.PropTypes={addressId:o.default.string.isRequired,onSelected:o.default.func,isSelectable:o.default.func.isRequired,index:o.default.number.isRequired,isSelected:o.default.bool.isRequired};var M=function(e){function t(){A(this,t);var e=j(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._bind("addressSelected","refreshState","okClicked"),e.state={chosenAddress:null,addressData:[]},e}return w(t,e),r(t,[{key:"idsEqual",value:function(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}},{key:"componentDidMount",value:function(){this.refreshState(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.idsEqual(this.props.addressIds,e.addressIds)||this.refreshState(e)}},{key:"refreshState",value:function(e){var t=this,n=[];p.default.each(e.addressIds,function(e){var r=!1;p.default.isUndefined(t.props.selectedId)||e!==t.props.selectedId||(r=!0),n.push({id:e,selected:r})}),this.setState({addressData:n})}},{key:"addressSelected",value:function(e){var t=p.default.cloneDeep(this.state.addressData);p.default.each(t,function(t){t.selected=t.id===e}),this.setState({addressData:t})}},{key:"okClicked",value:function(){var e=p.default.find(this.state.addressData,function(e){return e.selected});p.default.isUndefined(e)||this.props.addressPickedCallback(e.id)}},{key:"render",value:function(){var e=this,t=[],n=1;return p.default.each(this.state.addressData,function(r){t.push(s.default.createElement(D,{isSelected:r.selected,key:n,addressId:r.id,onSelected:e.addressSelected,isSelectable:e.state.addressData.length>1,index:n})),n++}),s.default.createElement(f.Modal,{size:"modal-lg",isOpen:this.props.isOpen},s.default.createElement(f.ModalHeader,null,s.default.createElement(f.ModalClose,{onClick:this.props.closeClick}),s.default.createElement(f.ModalTitle,null,this.props.addressText)),s.default.createElement(f.ModalBody,null,s.default.createElement("div",null,t)),s.default.createElement(f.ModalFooter,null,this.state.addressData.length>1&&s.default.createElement(O.default,{id:"addressDetailsapply",btnClass:"btn-primary",disabled:!p.default.some(this.state.addressData,["selected",!0]),buttonText:g.default.t("apply_address"),clickHandler:this.okClicked}),s.default.createElement(O.default,{id:"addressDetailsclose",buttonText:g.default.t("close"),btnClass:"btn-default",clickHandler:this.props.closeClick})))}}]),t}(v.default);M.propTypes={isOpen:o.default.bool.isRequired,closeClick:o.default.func.isRequired,addressPickedCallback:o.default.func.isRequired,addressIds:o.default.array.isRequired,selectedId:o.default.string,addressText:o.default.string.isRequired,notification:o.default.object.isRequired},t.default=(0,d.withNotifications)(M)},1066:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=m(a),i=n(7),o=m(i),d=n(6),l=m(d),u=n(346),c=m(u),p=n(29),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(p);function m(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._bind("onChange","onBlur"),n.state={value:e.defaultValue},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"focus",value:function(){}},{key:"onBlur",value:function(){this.props.onUpdate(this.state.value)}},{key:"onChange",value:function(e){this.setState({value:e})}},{key:"render",value:function(){var e=!!o.default.isUndefined(this.props.editable)||this.props.editable;return s.default.createElement("div",null,this.props.editableStatus.name===this.props.row.status&&e?s.default.createElement(c.default,{onBlur:this.onBlur,handleChange:this.onChange,labelText:"none",pickerId:"cellDatePicker",value:this.state.value,showLabel:!1}):this.state.value.format(f.dateFormat))}}]),t}(l.default);t.default=g},1067:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=u(a),i=n(0),o=u(i),d=n(6),l=u(d);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._bind("addressClicked"),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillReceiveProps",value:function(e){this.props=e}},{key:"addressClicked",value:function(){this.props.addressClickHandler(this.props.addressObject.id,this.props.orgName)}},{key:"render",value:function(){return s.default.createElement("li",null,s.default.createElement("a",{className:"clickable",onClick:this.addressClicked},this.props.addressObject.address))}}]),t}(l.default);t.default=c,c.propTypes={addressObject:o.default.object.isRequired,addressClickHandler:o.default.func.isRequired,orgName:o.default.string.isRequired}},1092:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=h(a),i=n(0),o=h(i),d=n(7),l=h(d),u=n(6),c=h(u),p=n(15),f=h(p),m=n(29),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(m);function h(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"render",value:function(){var e=[];return this.props.data.length>0&&l.default.each(this.props.data,function(t,n){if(null!==t){null===t.middleName&&(t.middleName="");var r=g.escapeHtml(t.firstName+" "+t.middleName+" "+t.lastName),a=g.escapeHtml(t.registrationStatus+", "+t.registrationYear);e.push(s.default.createElement("div",{key:n},s.default.createElement("div",{className:"col-sm-6"},s.default.createElement("label",{htmlFor:"name"},f.default.t("name")),s.default.createElement("p",{id:"name"},r)),s.default.createElement("div",{className:"col-sm-6"},s.default.createElement("label",{htmlFor:"address"},f.default.t("address")),s.default.createElement("address",{id:"address"},g.escapeHtml(t.address),s.default.createElement("br",null),g.escapeHtml(t.postalCode))),s.default.createElement("div",{className:"col-sm-6"},s.default.createElement("label",{htmlFor:"plate"},f.default.t("license_plate")),s.default.createElement("p",{id:"plate"},g.escapeHtml(t.licensePlate))),s.default.createElement("div",{className:"col-sm-6"},s.default.createElement("label",{htmlFor:"plateDetails"},f.default.t("plate_details")),s.default.createElement("p",{id:"plateDetails"},a))))}else e.push(s.default.createElement("div",{key:n},f.default.t("plate_not_found")))}),s.default.createElement("div",null,e)}}]),t}(c.default);t.default=v,v.propTypes={data:o.default.array.isRequired}},342:function(e,t,n){"use strict";var r=n(1),a=f(r),s=n(7),i=f(s),o=n(15),d=f(o),l=n(199),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),c=n(136),p=f(c);function f(e){return e&&e.__esModule?e:{default:e}}var m={parkingUserRoleException:"parkingUserRoleException",parkingAdminRoleException:"parkingAdminRoleException",fileEncodingError:"fileEncodingError"};function g(e,t){return-1!==e.indexOf(t)}e.exports={generateErrorMessage:function(e,t,n){var r,s,o=void 0,l=!1,c=void 0,f=void 0,h=void 0;return i.default.isUndefined(e.response.path)||(h=i.default.startsWith(e.response.path,"http")?i.default.last(i.default.split(e.response.path,"/api/")):e.response.path),i.default.isUndefined(e.response.exception)||(c=i.default.last(i.default.split(e.response.exception,"."))),"firewallError"===c?o=u.handleFirewallError():"serverError"===c?o=u.handleServerError(e):c===m.parkingUserRoleException?o=u.createParagraphMessage(d.default.t("parking_user_role_exception")):c===m.parkingAdminRoleException?o=u.createParagraphMessage(d.default.t("parking_admin_role_exception")):c===m.fileEncodingError?(r=e.response.files,s=[],i.default.each(r,function(e){s.push(a.default.createElement("li",null,e.name))}),o=a.default.createElement("div",null,a.default.createElement("p",null,d.default.t("file_encoding_error",{count:r.length})),a.default.createElement("p",null,d.default.t("file_encoding_error_list_message",{count:r.length})),a.default.createElement("ul",null,s))):"DuplicatedOrganizationNameException"===c?o=function(e){var t=i.default.first(i.default.split(i.default.last(i.default.split(e.response.message,"[")),"]"));return u.createParagraphMessage(d.default.t("duplicate_org_name_error",{name:t}))}(e):"LicensePlateRppException"===c?o=function(e){var t=i.default.split(e," ")[2];return u.createParagraphMessage(d.default.t("license_plate_rpp_exception",{plate:t}))}(e.response.message):"MaxPermitPerPersonPerAddressException"===c?o=u.createParagraphMessage(d.default.t("max_per_person_per_address_error")):"MaxPermitPerAddressException"===c?o=u.createParagraphMessage(d.default.t("max_permit_per_address_error")):"ResourceNotFoundException"===c?o=function(e){var t=u.createParagraphMessage(e.response.message);return g(e.response.message,"Unable to find resource Could not find address.")&&(t=u.createParagraphMessage(d.default.t("address_not_found"))),t}(e):"HttpRequestMethodNotSupportedException"===c?(f=function(e){return e.response.error}(e),l=!0):"Failed to fetch"===e.message?(f=d.default.t("server_not_responding"),l=!0):"Bad Request"===e.response.error&&-1!==i.default.has(e.response,"message")?null!==e.response.message?g(e.response.message,"Number of active parking sessions has reached the limit.")?o=u.createParagraphMessage(d.default.t("no_sessions_message")):g(e.response.message,"Another permit existed with the same license plate")?o=u.createParagraphMessage(d.default.t("duplicate_plate_error")):g(e.response.message,"Only images or pdf type are allowed")?o=u.createParagraphMessage(d.default.t("attachment_error")):g(e.response.message,"Permit existed for given organization, address and permit type.")?o=u.createParagraphMessage(d.default.t("duplicate_org_permit_error")):g(e.response.message,"This address cannot have Visitor Permit.")?o=function(e){var t=i.default.split(e,"have")[1];return u.createParagraphMessage(d.default.t("address_cant_have_permit",{permitType:t}))}(e.response.message):g(e.response.message,"The address for organization was deactivated.")?o=u.createParagraphMessage(d.default.t("org_address_inactive_error")):g(e.response.message,"Effective date is after expiry date.")?o=u.createParagraphMessage(d.default.t("effective_after_expiry_error")):g(e.response.message,"Date range is outside of Permit's date range.")?o=u.createParagraphMessage(d.default.t("session_date_range_error_message")):g(e.response.message,"# of max parking sessions has reached.")?o=u.createParagraphMessage(d.default.t("max_sessions_limit_reached_error_message")):g(e.response.message,"Effective date range overlaps with another permit.")?o=u.createParagraphMessage(d.default.t("permit_overlap_error")):g(e.response.message,"Unable save attachment.Unexpected response (413 Request Entity Too Large)")?o=u.createParagraphMessage(d.default.t("file_too_large_error")):g(e.response.message,"Invalid dates")?o=u.createParagraphMessage(d.default.t("session_date_overlap_error_message")):g(e.response.message,"Invalid plate request")?o=u.createParagraphMessage(d.default.t("licence_plate_format_exception")):(f=e.response.message,l=!0):o=function(e,t){return a.default.createElement("div",null,a.default.createElement(p.default,{id:"errorMessage",translationVar:"call_support"}),i.default.isUndefined(t)?null:a.default.createElement("p",null,d.default.t("path")+": "+t))}(0,h):(f=e.response.message,l=!0),l&&(o=i.default.has(e,"response")?u.generateDefaultErrorMessageBody(t,e.response.error,f,c,h,n):u.generateDefaultErrorMessageBody(t,e,f,c,h,n)),o},Exceptions:m}}}]);