(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1079:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(1),s=q(r),i=a(892),d=L(i),l=a(64),o=q(l),u=a(889),c=q(u),f=a(98),p=a(0),m=q(p),h=a(7),v=q(h),_=a(15),b=q(_),g=a(6),y=q(g),k=a(1031),T=q(k),S=a(1080),C=q(S),P=a(201),E=q(P),M=a(1054),O=L(M),D=a(342),w=L(D),j=a(1082),x=L(j),A=a(30),I=q(A),R=a(136),F=q(R),N=a(343),H=q(N);function L(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function q(e){return e&&e.__esModule?e:{default:e}}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function U(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var B=d.Element,K=d.scroller,W={duration:1e3,delay:100,smooth:!0,isDynamic:!0},z={title:"manage_page:cancel_modal_title",message:"manage_page:cancel_modal_message"},G=function(e){function t(){Z(this,t);var e=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._bind("_onClick"),e}return U(t,e),n(t,[{key:"_onClick",value:function(){this.props.clickHandler(this.props.address)}},{key:"render",value:function(){return s.default.createElement("li",null,s.default.createElement("a",{className:"clickable",onClick:this._onClick},this.props.address.address+" ("+b.default.t("permit_zone")+": "+this.props.address.addressDetail.rppZone.code+")"))}}]),t}(y.default);G.propTypes={address:m.default.object.isRequired,clickHandler:m.default.func.isRequired};var J=function(e){function t(e,a){Z(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n._bind("handleCancel","hideRevokeModal","createSession","endSession","onAddressClick","canCreateSession","cancelPermit","generateAddressList","showHelp","tourCallback"),n.state={addressList:[],addressObjects:[],selectedAddress:null,revokeModalIsOpen:!1,revokeCallback:function(){},savedStatus:{},submittedStatus:{},revokedStatus:{},cancelledStatus:{},activeStatus:{},activeSessions:[],permitTypes:[],auList:[],revokeModalCallback:null,revokeModalTitle:"",revokeModalMessage:"",revokeModalPermitId:"",loading:!1,demoMode:!1,demoSteps:[],preTourState:{},defaultAu:null},n}return U(t,e),n(t,[{key:"componentDidMount",value:function(){var e=this;o.default.all([O.getPermitAddressesForUser(),O.getPermitStatuses(),O.getPermitTypes(),O.getAuList(),O.getDefaultAu()]).spread(function(t,a,n,r,s){var i=v.default.sortBy(v.default.uniqBy(t,function(e){return e.id}),function(e){return e.address}),d=v.default.find(a,function(e){return"saved"===e.code.toLowerCase()}),l=v.default.find(a,function(e){return"submitted"===e.code.toLowerCase()}),o=v.default.find(a,function(e){return"terminated"===e.code.toLowerCase()}),u=v.default.find(a,function(e){return"revoked"===e.code.toLowerCase()}),c=v.default.find(a,function(e){return"active"===e.code.toLowerCase()});e.setState({addressList:i,savedStatus:d,submittedStatus:l,revokedStatus:u,activeStatus:c,cancelledStatus:o,permitTypes:n,auList:r,defaultAu:s})},function(t){e._handleError(t,w)})}},{key:"handleCancel",value:function(e,t,a){var n=this,r={id:e.id,status:this.state.cancelledStatus.code,address:{id:"0"},permitType:{id:"0"},permitReason:{id:"0"},permitStatus:{id:"0"}};O.changePermitStatus(r).then(function(e){var r=null,s=[];v.default.each(n.state.addressObjects,function(t){e.address.id===t.address.id&&(t.details=v.default.filter(t.details,function(t){return t.permitId!==e.id})),0!==t.details.length?s.push(t):r=t});var i=n.state.addressList;null!==r&&(i=v.default.filter(i,function(e){return e.id!==r.address.id}),n.setState({selectedAddress:null})),v.default.isUndefined(t)?n._successMessage("revoke_success_title","revoke_success_message"):t===a-1&&n._successMessage("revoke_all_success_title","revoke_all_success_message"),n.setState({addressObjects:s,addressList:i,revokeModalIsOpen:!1})},function(e){n._handleError(e,w)})}},{key:"hideRevokeModal",value:function(){this.setState({revokeModalIsOpen:!1})}},{key:"canCreateSession",value:function(e){var t=this,a=o.default.defer();return this.state.demoMode?a.resolve(!0):O.canCreateParkingSessionCheck(e).then(function(e){a.resolve(e.startable)},function(e){t._handleError(e,w)}),a.promise}},{key:"createSession",value:function(e,t,a){var n=this,r=v.default.find(this.state.auList,function(t){return t.id===e.plate.au}),s={licensePlate:e.plate.value,province:{id:r.id},permit:{id:t}};O.createParkingSession(s).then(function(e){if(null===e.id)n._errorMessage("no_sessions_title","no_sessions_message"),a(!1);else{var t=v.default.cloneDeep(n.state.addressObjects),r=v.default.find(t,function(t){return t.address.id===e.permit.address.id}),s=v.default.find(r.details,function(t){return t.permitId===e.permit.id});s.parkingSessions.push(e),n.setState({addressObjects:t}),n.canCreateSession(s.permitId).then(function(e){a(e)})}},function(e){400===e.status?(n._errorMessage("no_sessions_title","no_sessions_message"),a(!1)):(n._handleError(e,w),a(!0))})}},{key:"endSession",value:function(e,t){var a=this,n={id:e.id};O.endParkingSession(n).then(function(){var n=v.default.cloneDeep(a.state.addressObjects),r=v.default.find(n,function(t){return t.address.id===e.permit.address.id}),s=v.default.find(r.details,function(t){return t.permitId===e.permit.id});s.parkingSessions=v.default.filter(s.parkingSessions,function(t){return e.id!==t.id}),a.setState({addressObjects:n}),a.canCreateSession(s.permitId).then(function(e){t(e)})},function(e){a._handleError(e,w,"stop_session_error_title","stop_session_error_message")})}},{key:"cancelPermit",value:function(e){var t=this,a="";a=v.default.isUndefined(e.permitNumber)?e.number:e.permitNumber,this.setState({revokeModalIsOpen:!0,revokeModalTitle:z.title,revokeModalMessage:z.message,revokeModalPermitId:a,revokeCallback:function(){t.handleCancel(e),t.setState({revokeModalIsOpen:!1})}})}},{key:"onAddressClick",value:function(e){var t=this,a=v.default.find(this.state.addressObjects,function(t){return t.address.id===e.id});v.default.isUndefined(a)?O.getPermitsAndSessionsForAddress(e.id).then(function(a){var n=[];v.default.each(a,function(e){var a=v.default.find(t.state.permitTypes,function(t){return t.id===e.permitTypeId}),r={permitNumber:e.permitNumber,permitType:a,permitId:e.permitId,effectiveDate:e.permitEffectiveDate,expiryDate:e.expiryDate,parkingSessions:e.parkingSessions};n.push(r)});var r={address:e,details:n},s=v.default.cloneDeep(t.state.addressObjects);s.push(r),t.setState({addressObjects:s,selectedAddress:e.id}),K.scrollTo("ManageSection",W)},function(e){t._handleError(e,w,"permits_load_error_title","permits_load_error_message")}):this.setState({selectedAddress:e.id})}},{key:"generateAddressList",value:function(){var e=this,t=null;return this.state.addressList.length>0&&(t=v.default.map(this.state.addressList,function(t){return s.default.createElement(G,{key:t.id,address:t,clickHandler:e.onAddressClick})})),t}},{key:"showHelp",value:function(){var e=v.default.cloneDeep(this.state);this.setState({preTourState:e,demoMode:!0,demoSteps:x.getTourSteps(this.state.permitTypes),addressList:x.getFakeAddressData()})}},{key:"tourCallback",value:function(e){var t=this;if("next"===e.action&&"step:after"===e.type&&0===e.index){var a=[];v.default.each(x.getFakePermitData(this.state.permitTypes),function(e){var n=v.default.find(t.state.permitTypes,function(t){return t.id===e.permitTypeId}),r={permitNumber:e.permitNumber,permitType:n,permitId:e.permitId,effectiveDate:e.permitEffectiveDate,expiryDate:e.permitExpiryDate,parkingSessions:e.parkingSessions};a.push(r)});var n=[{address:this.state.addressList[0],details:a}];this.setState({addressObjects:n,selectedAddress:n[0].address.id})}else("next"===e.action&&"tour:end"===e.type||"close"===e.action)&&(this.setState(this.state.preTourState),window.location.reload())}},{key:"render",value:function(){var e=this,t=this.generateAddressList(),a=null,n=v.default.find(this.state.addressObjects,function(t){return t.address.id===e.state.selectedAddress});return v.default.isUndefined(n)||(a=s.default.createElement(C.default,{key:n.address.id,addressObject:n,permitTypes:this.state.permitTypes,createSessionHandler:this.createSession,endSessionHandler:this.endSession,auList:this.state.auList,startSessionCheck:this.canCreateSession,handlePermitCancel:this.cancelPermit,defaultAu:this.state.defaultAu})),s.default.createElement("div",null,s.default.createElement(c.default,{ref:function(t){e.joyride=t},run:this.state.demoMode,debug:!1,callback:this.tourCallback,steps:this.state.demoSteps,showProgress:!0,disableOverlayClicks:!0,disableOverlayClose:!0,continuous:!0,locale:{back:b.default.t("j_back"),close:b.default.t("j_close"),last:b.default.t("j_last"),next:b.default.t("j_next"),skip:b.default.t("j_skip")}}),s.default.createElement("div",{id:"managePermitsPanel",className:"panel panel-default"},s.default.createElement("div",{className:"panel-heading"},b.default.t("manage_header"),s.default.createElement(I.default,{id:"showHelp",buttonText:b.default.t("show_tour"),btnClass:"btn-xs btn-warning pull-right",clickHandler:this.showHelp})),s.default.createElement("div",{className:"panel-body"},s.default.createElement(F.default,{translationVar:"manage_page_instructions",id:"managePageInstructions",divClass:"alert alert-success"}),s.default.createElement("ul",{id:"addressList"},t),s.default.createElement(B,{name:"ManageSection"}),a,s.default.createElement(T.default,{confirmButtonText:b.default.t("cancel_modal_confirm_button"),closeButtonText:b.default.t("cancel_modal_close_button"),isOpen:this.state.revokeModalIsOpen,title:b.default.t(this.state.revokeModalTitle),body:b.default.t(this.state.revokeModalMessage),okClick:this.state.revokeCallback,closeClick:this.hideRevokeModal,permitNumber:this.state.revokeModalPermitId}))),s.default.createElement(E.default,{visible:this.state.loading}))}}]),t}(y.default);t.default=(0,H.default)(N.modules.rpp)((0,f.withNotifications)(J))},1080:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(1),s=E(r),i=a(0),d=E(i),l=a(7),o=E(l),u=a(3),c=E(u),f=a(64),p=E(f),m=a(15),h=E(m),v=a(349),_=E(v),b=a(6),g=E(b),y=a(30),k=E(y),T=a(1081),S=E(T),C=a(29),P=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(C);function E(e){return e&&e.__esModule?e:{default:e}}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function D(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=function(e){function t(){M(this,t);var e=O(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._bind("_startClicked","_handleInput","_handleSelect","_handleCancel","_cancelPermitClicked"),e}return D(t,e),n(t,[{key:"componentWillReceiveProps",value:function(e){this.props=e}},{key:"_startClicked",value:function(){this.props.startClickHandler(this.props.permit)}},{key:"_handleInput",value:function(e){this.props.handlePlateInput(this.props.permit,e)}},{key:"_handleSelect",value:function(e){this.props.handleAuSelect(this.props.permit,e)}},{key:"_handleCancel",value:function(e){this.props.permit.selfManaged?this.props.cancelClickHandler(e,e.permit):this.props.handlePermitCancel(e.permit)}},{key:"_cancelPermitClicked",value:function(){this.props.handlePermitCancel(this.props.permit)}},{key:"render",value:function(){var e=o.default.map(this.props.sessions,function(e){var t=(0,c.default)(e.activationDateTime).format(P.dateFormat),a=(0,c.default)(e.deactivationDateTime).format(P.dateFormat);return{session:e,sessionId:e.id,plate:e.licensePlate,number:e.permit.permitNumber,province:e.province.name,start:t,end:a}}),t=""!==this.props.permit.plate.au&&""!==this.props.permit.plate.value,a=this.props.permit.selfManaged?this.props.permit.number:"";return s.default.createElement("div",{id:"permitPanel_"+P.generateTypeTranslationVar(this.props.label),className:"panel panel-default",key:this.props.label},s.default.createElement("div",{className:"panel-heading"},this.props.label,s.default.createElement("strong",{className:"m-l-1"},a),this.props.permit.selfManaged&&s.default.createElement(k.default,{id:"cancelPermit",clickHandler:this._cancelPermitClicked,btnClass:"pull-right btn-xs btn-danger",buttonText:h.default.t("cancel_permit")})),this.props.permit.selfManaged?s.default.createElement("div",{className:"panel-body"},s.default.createElement("div",null,s.default.createElement("p",null,s.default.createElement("b",null,h.default.t("permit_expiry_date")+": "),(0,c.default)(this.props.permit.expiryDate).format(P.dateFormat))),s.default.createElement("div",{className:"col-sm-3 col-md-2 col-lg-2"},s.default.createElement(_.default,{key:this.props.permit.type,plate:this.props.permit.plate,handleInput:this._handleInput,handleAuSelect:this._handleSelect,auList:this.props.auList,showRemove:!1,disabled:!this.props.permit.startable})),s.default.createElement("div",{className:"col-sm-3 col-md-2 col-lg-2"},s.default.createElement(k.default,{id:"start",clickHandler:this._startClicked,btnClass:"btn-primary",buttonText:h.default.t("start"),disabled:!this.props.permit.startable||!t})),s.default.createElement("div",{className:"col-sm-9 col-md-8 col-lg-8"},s.default.createElement(S.default,{formattedData:e,buttonClickCallback:this._handleCancel,selfManaged:this.props.permit.selfManaged}))):s.default.createElement("div",{className:"panel-body"},s.default.createElement(S.default,{formattedData:e,buttonClickCallback:this._handleCancel,selfManaged:this.props.permit.selfManaged})))}}]),t}(g.default);w.propTypes={handlePlateInput:d.default.func.isRequired,handleAuSelect:d.default.func.isRequired,startClickHandler:d.default.func.isRequired,permit:d.default.object.isRequired,cancelClickHandler:d.default.func.isRequired,sessions:d.default.array.isRequired,handlePermitCancel:d.default.func.isRequired};var j=function(e){function t(){M(this,t);var e=O(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._bind("handlePlateInput","handleAuSelect","getPermitTypeById","createParkingSession","endSession","refreshState","cancelPermit"),e.state={permits:[]},e}return D(t,e),n(t,[{key:"componentWillReceiveProps",value:function(e){this.props=e,this.refreshState(e.addressObject.details)}},{key:"componentDidMount",value:function(){this.refreshState(this.props.addressObject.details)}},{key:"refreshState",value:function(e){var t=this,a=[],n=p.default.defer(),r=e.length;o.default.each(e,function(e){var s=e.permitType;s.selfManagedParkingSession?t.props.startSessionCheck(e.permitId).then(function(i){a.push({id:e.permitId,type:s.id,number:e.permitNumber,plate:{au:t.props.defaultAu.id,value:"",id:0,guid:null},startable:i,selfManaged:s.selfManagedParkingSession,effectiveDate:e.effectiveDate,expiryDate:e.expiryDate}),a.length===r&&n.resolve()}):(a.push({id:e.permitId,type:s.id,number:e.permitNumber,plate:{au:t.props.defaultAu.id,value:"",id:0,guid:null},startable:!0,selfManaged:s.selfManagedParkingSession,effectiveDate:e.effectiveDate,expiryDate:e.expiryDate}),a.length===r&&n.resolve())}),n.promise.then(function(){var e=o.default.remove(a,function(e){return e.selfManaged}),n=o.default.map(t.props.permitTypes,function(e){return e.id}),r=function(e,t){return n.indexOf(e.type)<n.indexOf(t.type)?-1:1};e.sort(r),a.sort(r),a=o.default.concat(e,a),t.setState({permits:a})})}},{key:"handlePlateInput",value:function(e,t){var a=o.default.map(this.state.permits,function(a){var n=o.default.cloneDeep(a);return n.id===e.id&&(n.plate.value=t),n});this.setState({permits:a})}},{key:"handleAuSelect",value:function(e,t){var a=o.default.map(this.state.permits,function(a){var n=o.default.cloneDeep(a);return n.id===e.id&&(n.plate.au=t),n});this.setState({permits:a})}},{key:"endSession",value:function(e,t){var a=this;this.props.endSessionHandler(e,function(e){var n=o.default.map(a.state.permits,function(n){var r=o.default.cloneDeep(n);return r.id===t.id&&(r.Plate={au:a.props.defaultAu.id,value:"",id:0,guid:null},r.startable=e),r});a.setState({permits:n})})}},{key:"createParkingSession",value:function(e){var t=this,a=o.default.find(this.props.addressObject.details,function(t){return t.permitType.id===e.type});this.props.createSessionHandler(e,a.permitId,function(a){var n=o.default.map(t.state.permits,function(n){var r=o.default.cloneDeep(n);return r.id===e.id&&(r.Plate={au:t.props.defaultAu.id,value:"",id:0,guid:null},r.startable=a),r});t.setState({permits:n})})}},{key:"getPermitTypeById",value:function(e){var t=o.default.find(this.props.permitTypes,function(t){return t.id===e});return t.name}},{key:"cancelPermit",value:function(e){this.props.handlePermitCancel(e)}},{key:"render",value:function(){var e=this,t=[],a=[];o.default.each(this.state.permits,function(t,n){var r=e.getPermitTypeById(t.type),s=o.default.find(e.props.addressObject.details,function(e){return e.permitType.id===t.type&&t.id===e.permitId});o.default.isUndefined(s)||a.push({key:t.type+"_"+n,label:r,permitNumber:t.number,permit:t,type:t.type,sessions:s.parkingSessions})});var n=o.default.groupBy(a,function(e){return e.type});return o.default.forOwn(n,function(a){var n=o.default.cloneDeep(a[0]);if(1!==a.length)for(var r=1;r<a.length;r++)n.sessions=o.default.concat(n.sessions,a[r].sessions);n.sessions=o.default.orderBy(n.sessions,function(e){return(0,c.default)(e.deactivationDateTime).format(P.dateFormat)},"asc"),t.push(s.default.createElement(w,{key:n.type,label:n.label,permit:n.permit,auList:e.props.auList,handlePlateInput:e.handlePlateInput,handleAuSelect:e.handleAuSelect,startClickHandler:e.createParkingSession,cancelClickHandler:e.endSession,sessions:o.default.isUndefined(n.sessions)?[]:n.sessions,handlePermitCancel:e.cancelPermit,handlePermitsRevoke:e.cancelPermits}))}),s.default.createElement("div",{id:"addressSection"},s.default.createElement("div",{className:"form-group"},s.default.createElement("h3",null,this.props.addressObject.address.address+" ("+h.default.t("permit_zone")+": "+this.props.addressObject.address.addressDetail.rppZone.code+")")),t)}}]),t}(g.default);t.default=j,j.propTypes={addressObject:d.default.object.isRequired,permitTypes:d.default.array.isRequired,createSessionHandler:d.default.func.isRequired,endSessionHandler:d.default.func.isRequired,auList:d.default.arrayOf(d.default.shape({id:d.default.string,countryCode:d.default.string,type:d.default.string,code:d.default.string,name:d.default.string})).isRequired,startSessionCheck:d.default.func.isRequired,handlePermitCancel:d.default.func.isRequired,defaultAu:d.default.shape({id:d.default.string,countryCode:d.default.string,type:d.default.string,code:d.default.string,name:d.default.string}).isRequired}},1081:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=a(1),s=h(r),i=a(0),d=h(i),l=a(874),o=a(6),u=h(o),c=a(15),f=h(c),p=a(1063),m=h(p);function h(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._bind("createButton","buttonClicked"),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"buttonClicked",value:function(e){this.props.buttonClickCallback(e)}},{key:"createButton",value:function(e){var t=this.props.selfManaged?f.default.t("stop_session"):f.default.t("cancel_permit");return s.default.createElement(m.default,{buttonText:t,clickCallback:this.buttonClicked,data:e,btnCss:"btn-danger",id:this.props.selfManaged?"stop":"cancel"})}},{key:"render",value:function(){return s.default.createElement("div",{id:this.props.selfManaged?"sessionTable":"permitTable"},s.default.createElement(l.BootstrapTable,{data:this.props.formattedData,condensed:!1,bordered:!1,remote:!0},s.default.createElement(l.TableHeaderColumn,{width:"85px",dataField:"number",hidden:this.props.selfManaged},f.default.t("permit_number")),s.default.createElement(l.TableHeaderColumn,{width:"75px",dataField:"plate"},f.default.t("plate")),s.default.createElement(l.TableHeaderColumn,{width:"75px",dataField:"province"},f.default.t("province")),s.default.createElement(l.TableHeaderColumn,{width:"75px",dataField:"start"},this.props.selfManaged?f.default.t("active_time"):f.default.t("effective_date")),s.default.createElement(l.TableHeaderColumn,{width:"75px",dataField:"end"},this.props.selfManaged?f.default.t("deactive_time"):f.default.t("expiry_date")),s.default.createElement(l.TableHeaderColumn,{width:"75px",dataFormat:this.createButton,dataField:"session"}),s.default.createElement(l.TableHeaderColumn,{isKey:!0,hidden:!0,dataField:"sessionId"})))}}]),t}(u.default);t.default=v,v.propTypes={formattedData:d.default.arrayOf(d.default.shape({sessionId:d.default.string.isRequired,session:d.default.object.isRequired,end:d.default.string.isRequired,start:d.default.string.isRequired,plate:d.default.string.isRequired,number:d.default.string.isRequired,province:d.default.string.isRequired})).isRequired,buttonClickCallback:d.default.func.isRequired,selfManaged:d.default.bool.isRequired}},1082:function(e,t,a){"use strict";var n=a(7),r=c(n),s=a(203),i=(c(s),a(15)),d=c(i),l=a(29),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(l),u=a(886);function c(e){return e&&e.__esModule?e:{default:e}}var f={name:"FakeProvince"},p="FakeCountry",m="FakeCity",h={id:"2",rppZone:{code:"x"}};function v(){return[{address:"789 FAKE STREET",addressDetail:h,city:m,country:p,duplicated:!1,id:"f2eaa2b5-6646-4939-bac1-8050c02b308d",postalCode:"T2V2V2",province:f,standardized:!0},{address:"456 FAKE STREET",addressDetail:h,city:m,country:p,duplicated:!1,id:"8111d474-8dbf-4b99-a6e9-02406789336e",postalCode:"T2N2E2",province:f,standardized:!0}]}e.exports={getTourSteps:function(e){var t="",a=0,n=r.default.filter(e,function(e){return e.selfManagedParkingSession}),s=r.default.filter(e,function(e){return!e.selfManagedParkingSession}),i=[];r.default.forEach(r.default.drop(n),function(e){i.push(d.default.t(o.generateTypeTranslationVar(e.name)))});var l=[];r.default.forEach(r.default.drop(s),function(e){l.push(d.default.t(o.generateTypeTranslationVar(e.name)))});var c="",f="";0!==n.length&&(c=d.default.t(o.generateTypeTranslationVar(n[0].name)),t=t+"  \n * "+c,a+=1),0!==s.length&&(f=d.default.t(o.generateTypeTranslationVar(s[0].name)),t=t+"  \n * "+f,a+=1);var p=d.default.t("address_details_demo_message",{types:t,count:a}),m=0!==n.length?d.default.t("self_managed_type_demo_message",{type:c}):"",h=0!==i.length?d.default.t("other_managed_type_demo_message",{count:i.length,otherTypes:r.default.join(i,"  \n * ")}):"",v=0!==s.length?d.default.t("non_self_managed_type_demo_message",{type:f}):"",_=0!==l.length?d.default.t("other_non_managed_type_demo_message",{count:l.length,otherTypes:r.default.join(l,"  \n * ")}):"",b=[];return b.push({title:d.default.t("manage_panel_demo_title"),content:(0,u.generateMarkedContent)("manage_panel_demo_message"),target:"#managePermitsPanel",placement:"auto",event:"hover",isFixed:!1,disableBeacon:!0},{title:d.default.t("manage_address_click_demo_title"),content:(0,u.generateMarkedContent)("manage_address_click_demo_message"),target:"#addressList",placement:"auto",event:"hover",isFixed:!1},{title:d.default.t("address_details_demo_title"),content:(0,u.wrapTranslatedContent)(p,"address_details_demo"),target:"#addressSection",placement:"auto",event:"hover",isFixed:!1}),0!==n.length&&b.push({title:d.default.t("self_managed_permit_demo_title"),content:(0,u.wrapTranslatedContent)(m+h,"self_managed_permit_demo"),target:"#permitPanel_"+o.generateTypeTranslationVar(n[0].name),placement:"auto",event:"hover",isFixed:!1},{title:d.default.t("plate_entry_demo_title"),content:(0,u.generateMarkedContent)("plate_entry_demo_message"),target:"#plateInput_0",placement:"auto",event:"hover",isFixed:!1},{title:d.default.t("start_session_button_demo_title"),content:(0,u.generateMarkedContent)("start_session_button_demo_message"),target:"#start",placement:"auto",event:"hover",isFixed:!1},{title:d.default.t("session_table_demo_title"),content:(0,u.generateMarkedContent)("session_table_demo_message"),target:"#sessionTable",placement:"auto",event:"hover",isFixed:!1},{title:d.default.t("stop_session_demo_title"),content:(0,u.generateMarkedContent)("stop_session_demo_message"),target:"#stop",placement:"auto",event:"hover",isFixed:!1},{title:d.default.t("revoke_permit_demo_title"),content:(0,u.generateMarkedContent)("revoke_permit_demo_message"),target:"#cancelPermit",placement:"auto",event:"hover",isFixed:!1}),0!==s.length&&b.push({title:d.default.t("non_managed_permit_demo_title"),content:(0,u.wrapTranslatedContent)(v+_,"non_managed_permit_demo"),target:"#permitPanel_"+o.generateTypeTranslationVar(s[0].name),placement:"auto",event:"hover",isFixed:!1},{title:d.default.t("permit_table_demo_title"),content:(0,u.generateMarkedContent)("permit_table_demo_message"),target:"#permitTable",placement:"auto",event:"hover",isFixed:!1},{title:d.default.t("cancel_permit_demo_title"),content:(0,u.generateMarkedContent)("cancel_permit_demo_message"),target:"#cancel",placement:"auto",event:"hover",isFixed:!1}),b},getFakePermitData:function(e){var t=v()[0],a=r.default.find(e,function(e){return e.selfManagedParkingSession}),n=r.default.find(e,function(e){return!e.selfManagedParkingSession}),s=[];return r.default.isUndefined(a)||s.push({parkingSessions:[{action:null,activationDateTime:"2017-05-16T14:33:13.528Z",deactivationDateTime:"2019-05-16T14:33:13.528Z",estimatedDeactivationDateTime:"2019-05-16T14:33:13.528Z",id:"8312b5c3-f450-4605-811b-f5871319608f",licensePlate:"FAKEPLATE2",permit:{active:!0,address:t,aliasName:null,createdDate:"2017-05-16T14:32:39.601Z",effectiveDate:"2017-05-16T14:33:13.528Z",expiryDate:"2019-05-16T14:33:13.528Z",id:"a39cd11d-bf48-46b8-8f48-06f221a63c9c",modifiedDate:"2017-05-16T14:33:13.531Z",ownerId:"debbd2af-7424-4a70-b937-299badd8eef9",permitNumber:"RPEUMHCW",permitReason:{code:"REG",effectiveDate:"2016-10-20T22:06:56.682783Z",expiryDate:null,id:"93763e58-fdf9-48f4-fd2e-efd5b206bf8e",name:"Registered",type:"468b2977-b67a-7df8-a770-d528efdc76a8"},permitStatus:{code:"APPROVED",effectiveDate:"2016-10-20T22:06:56.655695Z",expiryDate:null,id:"001d7a8b-eb2b-3785-0728-ce17d39298f9",name:"Approved",type:"PERMIT_STATUS"},permitType:a,permitTypeValidWithAddress:!0,rppZone:"KK",status:null,type:"U",validAddress:!0,vehicles:[{id:"598673aa-91b1-47d0-a39b-bb7a369d5d24",licensePlate:"BEEP",province:f}]},province:f,startable:!1}],permitCategory:"U",permitId:"a39cd11d-bf48-46b8-8f48-06f221a63c9c",permitNumber:"RPEUMHCW",permitTypeId:a.id}),r.default.isUndefined(n)||s.push({parkingSessions:[{action:null,activationDateTime:"2017-05-16T14:52:48.694Z",deactivationDateTime:"2017-05-30T14:52:48.694Z",estimatedDeactivationDateTime:"2017-05-30T14:52:48.694Z",id:"654c2de9-52c8-4b83-8060-eddb0cf5559c",licensePlate:"FAKEPLATE1",permit:{active:!0,address:t,aliasName:null,createdDate:"2017-05-16T14:32:53.974Z",effectiveDate:"2017-05-16T14:33:07.999Z",expiryDate:"2019-05-16T14:33:07.999Z",id:"bac57268-e464-4ccd-a392-5f3657cf62de",modifiedDate:"2017-05-16T14:33:08.002Z",ownerId:"debbd2af-7424-4a70-b937-299badd8eef9",permitNumber:"VPUK1GEV",permitReason:{code:"VS",effectiveDate:"2016-10-20T22:06:56.705162Z",expiryDate:null,id:"38d146d3-0ecc-f004-266e-01d865d5caff",name:"Visitor Reason",type:"0fd31fbf-0052-bf6b-3cf4-04733eba01e0"},permitStatus:{code:"APPROVED",effectiveDate:"2016-10-20T22:06:56.655695Z",expiryDate:null,id:"001d7a8b-eb2b-3785-0728-ce17d39298f9",name:"Approved",type:"PERMIT_STATUS"},permitType:n,permitTypeValidWithAddress:!0,rppZone:"KK",status:null,type:"U",validAddress:!0,vehicles:[]},province:f,startable:!1}],permitCategory:"U",permitId:"bac57268-e464-4ccd-a392-5f3657cf62de",permitNumber:"VPUK1GEV",permitTypeId:n.id}),s},getFakeAddressData:v}}}]);